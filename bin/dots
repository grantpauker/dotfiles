#!/usr/bin/env bash
error(){
	echo "$* (exiting)"
}
usage(){
	n=$(basename "$0")
	echo "usage:"
	echo "  $n 0           disable dots"
	echo "  $n 1 [0-15]*   enable dots"
}
source ~/.theme/shell
if [[ "$#" == "0" ]]; then
	usage
	exit
fi
if [[ "$1" == "0" ]]; then
	echo "Disabling dots"
	echo 0 > ~/.system/dots-state
elif [[ "$1" == "1" ]]; then
	if [[ "$#" == "1" ]]; then
		error "No colors"
		exit
	fi
	:> ~/.system/dots-color
	colors=""
	for i in "${@:2}"; do 
		if [ "$i" -ge 0 -a "$i" -le 15 ]; then
			colors="${colors[$i]} $colors"
		else
			error "Bad color"
			exit
		fi
	done
	echo "Setting colors: $colors"
	echo $colors >> ~/.system/dots-color
	echo 0 >> ~/.system/dots-color
	echo 1 > ~/.system/dots-state
fi

