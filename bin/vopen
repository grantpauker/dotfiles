#!/usr/bin/env bash
get-tv(){
	VIDEO_DIR=~/Videos
	find $VIDEO_DIR -type d | grep 'season-[0-1]*' | sed 's|'$VIDEO_DIR'/\{0,1\}||g'
}
get-movies(){
	VIDEO_DIR=~/Videos/movies
	find $VIDEO_DIR -type f  | egrep "\.mp4|\.webm|\.mkv|\.flv|\.vob|\.gif|\.avi|\.mov|\.wmv|\.m4p|\.m4v|\.mpg|\.mpeg|\.3gp" | sed 's|'$VIDEO_DIR'/\{0,1\}\(.*\)\..*|\1|g'
}
case "$1" in
"-t"|"--tv-show")
	VIDEO_DIR=~/Videos
	find $VIDEO_DIR -type d | grep 'season-[0-1]*' | sed 's|'$VIDEO_DIR'/\{0,1\}||g'
	choice=$VIDEO_DIR/$(get-tv | rofi -dmenu -p 'tv show')
	rifle $choice/* ;;
"-m"|"--movies")
	VIDEO_DIR=~/Videos/movies
	choice=$VIDEO_DIR/$(get-movies | rofi -dmenu -p 'movie') 
	rifle $choice.* ;;
"-a"|"--all")
	choice=$VIDEO_DIR/$((get-movies &&  get-tv) | sed '/.*\/.*/! s/\(.*\)/movies\/\1/g' | rofi -dmenu -p 'movie')
	rifle $choice.* ;;
*)
	echo "Usage: vopen [MODE]"
	echo "Modes:"
	echo "  -m, --movie      movies"
	echo "  -t, --tv-show    tv shows"
	echo "  -a, --all        both movies and tv shows" ;;
esac

