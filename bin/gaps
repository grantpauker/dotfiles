#!/usr/bin/env bash
INNER=5
OUTER=1

mode=$1

if [[ -z "$mode" || "$mode" == "toggle" ]]; then
	workspace=$(i3-msg -t get_workspaces \
		| jq -r '.[] | if .["focused"] then .["name"] else empty end')
	inner=$(i3-msg -t get_tree \
		| jq -r 'recurse(.nodes[]) | if .type == "workspace" and .name == "'"$workspace"'" then .gaps.inner else empty end')

	[[ "$inner" == 0 ]] && mode=on || mode=off
fi

if [[ "$mode" == "on" ]]; then
	i3-msg "gaps inner current set $INNER; gaps outer current set $OUTER"	
else
	i3-msg "gaps inner current set 0; gaps outer current set 0"
fi
