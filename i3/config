# font
font pango:Fira Code 8, FontAwesome 8

#constants
set $width 3200
set $height 1800
set $halfwidth 1600
set $halfheight 900

#color
set $base00 #292D3E
set $base01 #444267
set $base02 #32374D
set $base03 #676E95
set $base04 #8796B0
set $base05 #959DCB
set $base06 #959DCB
set $base07 #FFFFFF
set $base08 #F07178
set $base09 #F78C6C
set $base0A #FFCB6B
set $base0B #C3E88D
set $base0C #89DDFF
set $base0D #82AAFF
set $base0E #C792EA
set $base0F #FF5370
set $clear  #00000000

# keys
set $up k
set $down j
set $left h
set $right l
set $capslock F13
set $mod Mod4
set $mousesaccel 1

floating_modifier $mod

# commands
set $term kitty
set $termfree kitty --class "workfree"
set $browser google-chrome-stable
set $math python -q -i -c 'from math import *'

# startup 'n' stuff
exec xrandr --dpi 276
exec [ -e ~/.Xresources ] && xrdb -merge -I$HOME ~/.Xresources
exec [ -e ~/.fehbg ] && ~/.fehbg
exec [ -e ~/.compton.conf ] && compton --config ~/.compton.conf -b
exec xhost +
exec xinput --set-prop 12 'libinput Accel Speed' $mouseaccel

exec syncthing
exec mpd
exec nm-applet
exec greenclip daemon
exec udiskie
#exec conky -d

exec telegram-desktop
exec $browser
exec $term
exec $termfree --name "dropdown" 
exec $termfree --name "math" -e $math
exec_always pgrep -x mpdupdate || mpdupdate

# popups
set $fixwin resize set 1500 600, move position center
bindsym $mod+z [instance="dropdown"] scratchpad show, [instance="dropdown"] 
bindsym $mod+Shift+z [instance="dropdown"] $fixwin
bindsym $mod+x [instance="math"] scratchpad show, [instance="math"]
bindsym $mod+Shift+x [instance="math"] $fixwin
bindsym $mod+Shift+c exec vimclip
#bindsym $mod+v exec fopen
bindsym $mod+Shift+v exec vopen -t

# rofi
bindsym $mod+d exec rofi -show run
bindsym $mod+Shift+d exec rofi -modi "clipboard:greenclip print" -show clipboard -run-command '{cmd}'
bindsym $mod+b exec rofi-hw
bindsym XF86Search exec rofi -show run
bindsym $mod+grave exec rofi-symbols

# window control
bindsym $mod+q [con_id=__focused__	instance="^(?!dropdown)^(?!math)^(?!vimbuf)"] kill
bindsym $mod+a [urgent=latest] focus
bindsym $mod+Shift+a [urgent=latest] move workspace current

bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

bindsym $mod+$left focus left
bindsym $mod+$down focus down
bindsym $mod+$up focus up
bindsym $mod+$right focus right

set $winmv 40px
bindsym $mod+Shift+Left move left $winmv
bindsym $mod+Shift+Down move down $winmv
bindsym $mod+Shift+Up move up $winmv
bindsym $mod+Shift+Right move right $winmv

bindsym $mod+Shift+$left move left $winmv
bindsym $mod+Shift+$down move down $winmv
bindsym $mod+Shift+$up move up $winmv
bindsym $mod+Shift+$right move right $winmv

bindsym $mod+w split h
bindsym $mod+Shift+w split v

bindsym $mod+f fullscreen toggle

bindsym $mod+Shift+space floating toggle
bindsym $mod+space focus mode_toggle

#bindsym $mod+Shift+a focus parent
#bindsym $mod+d focus child

#bindsym $mod+Shift+minus move scratchpad
#bindsym $mod+minus scratchpad show

# workspace control
set $ws1 "1 "
set $ws2 "2 "
set $ws3 "3 "
set $ws4 "4 "
set $ws5 "5 "
set $ws6 "6 "
set $ws7 "7 "
set $ws8 "8"
set $ws8 "9"
set $ws9 "9"
set $ws10 "10"

bindsym $mod+1 workspace $ws1
bindsym $mod+2 workspace $ws2
bindsym $mod+3 workspace $ws3
bindsym $mod+4 workspace $ws4
bindsym $mod+5 workspace $ws5
bindsym $mod+6 workspace $ws6
bindsym $mod+7 workspace $ws7
bindsym $mod+8 workspace $ws8
bindsym $mod+9 workspace $ws9
bindsym $mod+0 workspace $ws10

bindsym $mod+Shift+1 move container to workspace $ws1
bindsym $mod+Shift+2 move container to workspace $ws2
bindsym $mod+Shift+3 move container to workspace $ws3
bindsym $mod+Shift+4 move container to workspace $ws4
bindsym $mod+Shift+5 move container to workspace $ws5
bindsym $mod+Shift+6 move container to workspace $ws6
bindsym $mod+Shift+7 move container to workspace $ws7
bindsym $mod+Shift+8 move container to workspace $ws8
bindsym $mod+Shift+9 move container to workspace $ws9
bindsym $mod+Shift+0 move container to workspace $ws10

for_window [instance="Godot_Engine"] floating enable
assign [class="Google-chrome"] $ws1
assign [class="^(?!workfree)kitty"] $ws2
assign [class="Code"] $ws3
assign [class="Godot"] $ws3
assign [class="TelegramDesktop"] $ws4
assign [class="mpv"] $ws5
for_window [class="Spotify"] move to workspace $ws5
for_window [title="YouTube Music - Google Chrome"] move to workspace $ws6

# window/gap resizing
set $rw2 8
set $rw1 4
set $rg1 5
bindsym $mod+y resize shrink width $rw2 px or $rw2 ppt 
bindsym $mod+u resize shrink height $rw2 px or $rw2 ppt 
bindsym $mod+i resize grow height $rw2 px or $rw2 ppt 
bindsym $mod+o resize grow width $rw2 px or $rw2 ppt 
bindsym $mod+t exec gaps

bindsym $mod+Shift+y resize shrink width $rw1 px or $rw1 ppt 
bindsym $mod+Shift+u resize shrink height $rw1 px or $rw1 ppt 
bindsym $mod+Shift+i resize grow height $rw1 px or $rw1 ppt 
bindsym $mod+Shift+o resize grow width $rw1 px or $rw1 ppt 
bindsym $mod+semicolon gaps outer current minus $rg1
bindsym $mod+apostrophe gaps outer current plus $rg1
bindsym $mod+Shift+semicolon gaps inner current minus $rg1
bindsym $mod+Shift+apostrophe gaps inner current plus $rg1

# open applications
bindsym $mod+Return exec kitty 
bindsym $mod+Shift+Return exec $termfree
bindsym $mod+s exec $browser
bindsym $mod+Shift+s exec $browser --incognito
bindsym $mod+c exec code
bindsym $mod+r exec $term -e "ranger"
bindsym $mod+Shift+r exec $termfree -e "ranger"

# stystem control
bindsym $mod+Escape exec refresh
bindsym $mod+Shift+Escape exec i4lock
bindsym $mod+Delete exec i3exit logout
bindsym $mod+Shift+Delete exec shutdown-menu

# i3bar config
bar {
	i3bar_command i3bar -t
	font pango: FontAwesome, Fira Code Retina 9
	status_command i3blocks -c ~/.i3/i3blocks.conf
	position top
	workspace_buttons yes
	colors {
		background	$base00
		separator		$base03
		#class							border	backgr	text
		focused_workspace		$base0D	$base0D	$base00
		active_workspace		$base00 $base00 $base00
		inactive_workspace	$base00 $base00 $base03
		urgent_workspace		$base0F $base0F $base07
	}
}

# window borders/gaps
for_window [class="^.*"] border pixel 1
for_window [class="Google-chrome"] border pixel 1
client.focused					$base0C	$clear $clear $base0C	$base0C
client.unfocused				$clear	$clear $clear	$clear  $clear
client.focused_inactive	$clear	$clear $clear $clear  $clear
client.urgent						$base0F	$clear $clear $base0F	$base0F

exec gaps on
smart_gaps on

# audio keys
bindsym XF86AudioRaiseVolume exec --no-startup-id sc up 5
bindsym XF86AudioLowerVolume exec --no-startup-id sc down 5

bindsym $mod+XF86AudioRaiseVolume exec --no-startup-id sc up 10
bindsym $mod+XF86AudioLowerVolume exec --no-startup-id sc down 10

bindsym XF86AudioMute exec --no-startup-id sc tmute
bindsym $mod+XF86AudioMute exec --no-startup-id sc tmax 

bindsym XF86AudioPlay exec --no-startup-id sc tplay 
bindsym XF86AudioNext exec --no-startup-id sc next 
bindsym XF86AudioPrev exec --no-startup-id sc prev

# sreen control
set $b_change 10
bindsym XF86MonBrightnessUp exec xbacklight -inc $b_change -time 1 
bindsym XF86MonBrightnessDown exec xbacklight -dec $b_change -time 1

bindsym $mod+XF86MonBrightnessUp exec xbacklight -inc $(($b_change/2)) -time 1 
bindsym $mod+XF86MonBrightnessDown exec xbacklight -dec $(($b_change/2)) -time 1 

bindsym $mod+Shift+XF86MonBrightnessUp exec xbacklight -inc $(($b_change/4)) -time 1 
bindsym $mod+Shift+XF86MonBrightnessDown exec xbacklight -dec $(($b_change/4)) -time 1 

bindsym $mod+e exec redtoggle
bindsym $mod+Shift+e exec lk

# screenshot
bindsym $mod+Tab exec screenshot -s
bindsym $mod+Shift+Tab exec screencast
#bindsym $mod+Shift+Tab exec screenshot -a

# dropdown terminal
for_window [instance="dropdown"] floating enable
for_window [instance="dropdown"] move scratchpad
for_window [instance="dropdown"] resize set 1500 600

# dropdown calculator
for_window [instance="math"] floating enable
for_window [instance="math"] move scratchpad
for_window [instance="math"] resize set 1500 600

# vim buffer
for_window [instance="vimbuf"] floating enable
for_window [instance="vimbuf"] move scratchpad
for_window [instance="vimbuf"] resize set 1500 600

#	rofi notes
for_window [instance="rnotes"] floating enable
for_window [instance="rnotes"] resize set 1500 600
for_window [instance="rnotes"] move position center
for_window [instance="rnotes"] move up 625

# vimclip
for_window [instance="vimclip"] floating enable
for_window [instance="vimclip"] resize set 1500 600
for_window [instance="vimclip"] move position center

# file opener
#for_window [instance="fopen"] floating enable
#for_window [instance="fopen"] resize set 1500 600
#for_window [instance="fopen"] move position center

# mpv floating window
for_window [title="mpvfloat"] floating enable
for_window [title="mpvfloat"] sticky enable
for_window [title="mpvfloat"] border pixel 0

# ncmpcpp floating window
for_window [title="ncmpcppfloat"] floating enable

# calcurse floating window
for_window [title="calcursefloat"] floating enable

# music
set $ncmcheck xdotool search --name "[n]cmpcppfloat"
bindsym $mod+m exec $ncmcheck || $termfree --title="ncmpcppfloat" -e "ncmpcpp"
bindsym $mod+Shift+m exec $ncmcheck || $termfree --title="ncmpcppfloat" -e "ncmpcpp -s media_library"

bindsym $mod+plus exec --no-startup-id sc up 5
bindsym $mod+minus exec --no-startup-id sc down 5
bindsym $mod+Shift+plus exec --no-startup-id sc up 10
bindsym $mod+Shift+minus exec --no-startup-id sc down 10 
bindsym $mod+BackSpace exec --no-startup-id sc tmute
bindsym $mod+Shift+BackSpace exec --no-startup-id sc tmax

bindsym $mod+less exec --no-startup-id sc prev
bindsym $mod+greater exec --no-startup-id	sc next

bindsym $mod+p exec --no-startup-id sc tplay
bindsym $mod+bracketleft exec --no-startup-id sc backward 5
bindsym $mod+bracketright exec --no-startup-id sc forward 5
bindsym $mod+Shift+bracketleft exec --no-startup-id sc backward 10
bindsym $mod+Shift+bracketright exec --no-startup-id sc forward 10
bindsym $mod+backslash exec --no-startup-id sc replay
bindsym $mod+Shift+backslash exec --no-startup-id sc clear

bindsym $mod+slash exec --no-startup-id rofi-mpd -s
bindsym $mod+Shift+slash exec --no-startup-id rofi-mpd -a
bindsym $mod+Shift+p exec --no-startup-id rofi-mpd -p
