# Font for window titles. Will also be used by the bar unless a different font
# is used in the bar {} block below.
exec [ -e ~/.Xresources ] && xrdb -merge -I$HOME ~/.Xresources
exec [ -e ~/.fehbg ] && ~/.fehbg
exec [ -e ~/.compton.conf ] && compton --config ~/.compton.conf -b

font pango:Monospace 8, FontAwesome 8

# keys
set $up l
set $down k
set $left j
set $right semicolon
set $mod Mod1
set $super Mod4

# colors
set $BACKGROUND #263238
set $WHITE #FFFFFF
set $GRAY #37474F
set $RED #FF5370
set $GREEN #C3E88D
set $YELLOW #FFCB6B
set $BLUE #82AAFF
set $PURPLE #C792EA
set $TEAL #80CBC4
set $LIGHTGRAY #DCEBF1
set $BLUEGRAY #546E7A

# misc
set $term termite
set $math R -q

# use Mouse+$mod to drag floating windows to their wanted position
floating_modifier $mod

# start a terminal
bindsym $mod+Return exec $term

# kill focused window
bindsym $mod+q [con_id=__focused__	instance="^(?!dropdown)^(?!math)"] kill

# run rofi
bindsym $mod+d exec rofi -show run
bindsym XF86Search exec rofi -show run
# alternatively, you can use the cursor keys:
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

# move focused window
bindsym $mod+Shift+$left move left
bindsym $mod+Shift+$down move down
bindsym $mod+Shift+$up move up
bindsym $mod+Shift+$right move right

# alternatively, you can use the cursor keys:
bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right

# split in horizontal orientation
bindsym $mod+h split h

# split in vertical orientation
bindsym $mod+v split v

# enter fullscreen mode for the focused container
bindsym $mod+f fullscreen toggle

# change container layout (stacked, tabbed, toggle split)
bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split

# toggle tiling / floating
bindsym $mod+Shift+space floating toggle

# change focus between tiling / floating windows
bindsym $mod+space focus mode_toggle

# focus the parent container
bindsym $mod+Shift+a focus parent

# focus the child container
# bindsym $mod+d focus child

# move the currently focused window to the scratchpad
bindsym $mod+Shift+minus move scratchpad

# Show the next scratchpad window or hide the focused scratchpad window.
# If there are multiple scratchpad windows, this command cycles through them.
bindsym $mod+minus scratchpad show


for_window [instance=".*"] border pixel 0
for_window [title=".*"] border pixel 0
for_window [class=".*"] border pixel 0
for_window [floating] border pixel 0
for_window [tiling] border pixel 0
set $ws1 "1 "
set $ws2 "2 "
set $ws3 "3 "
set $ws4 "4 "
set $ws5 "5 "

# switch to workspace
bindsym $mod+1 workspace $ws1
bindsym $mod+2 workspace $ws2
bindsym $mod+3 workspace $ws3
bindsym $mod+4 workspace $ws4
bindsym $mod+5 workspace $ws5
bindsym $mod+6 workspace 6
bindsym $mod+7 workspace 7
bindsym $mod+8 workspace 8
bindsym $mod+9 workspace 9
bindsym $mod+0 workspace 10

# move focused container to workspace
bindsym $mod+Shift+1 move container to workspace $ws1
bindsym $mod+Shift+2 move container to workspace $ws2
bindsym $mod+Shift+3 move container to workspace $ws3
bindsym $mod+Shift+4 move container to workspace $ws4
bindsym $mod+Shift+5 move container to workspace $ws5
bindsym $mod+Shift+6 move container to workspace 6
bindsym $mod+Shift+7 move container to workspace 7
bindsym $mod+Shift+8 move container to workspace 8
bindsym $mod+Shift+9 move container to workspace 9
bindsym $mod+Shift+0 move container to workspace 10

# assign apps to open in workspaces
for_window [instance="Godot_Engine"] floating enable
assign [class="Firefox"] $ws1
assign [class="Termite" instance="^(?!dropdown)^(?!math)^(?!vimclip)"] $ws2
assign [class="Code"] $ws3
assign [class="Godot"] $ws3

for_window [instance="Godot_Engine"] floating enable

# restart i3 inplace (preserves your layout/session, can be used to upgrade i3)
bindsym $mod+Shift+r exec "xrdb ~/.Xresources && /usr/bin/i3-msg restart"

# exit i3 (logs you out of your X session)
bindsym $mod+Shift+e exec "zenity --icon-name='system-log-out' --question --title='Shutdown?' --text='Are you sure, proceed to logout?' && i3-msg exit"
# resize window (you can also use the mouse for that)
set $resize_width 8
set $small_resize_width 4
set $really_small_resize_width 2
mode "resize" {
	bindsym g mode "gaps"

	bindsym $left		resize shrink width $resize_width px or $resize_width ppt
	bindsym $down		resize grow height $resize_width px or $resize_width ppt
	bindsym $up			resize shrink height $resize_width px or $resize_width ppt
	bindsym $right	resize grow width $resize_width px or $resize_width ppt

	bindsym Left	resize shrink width $resize_width px or $resize_width ppt
	bindsym Down	resize grow height $resize_width px or $resize_width ppt
	bindsym Up		resize shrink height $resize_width px or $resize_width ppt
	bindsym Right	resize grow width $resize_width px or $resize_width ppt

	bindsym $mod+$left	resize shrink width $small_resize_width px or $small_resize_width ppt
	bindsym $mod+$down	resize grow height $small_resize_width px or $small_resize_width ppt
	bindsym $mod+$up		resize shrink height $small_resize_width px or $small_resize_width ppt
	bindsym $mod+$right	resize grow width $small_resize_width px or $small_resize_width ppt

	bindsym $mod+Left		resize shrink width $small_resize_width px or $small_resize_width ppt
	bindsym $mod+Down		resize grow height $small_resize_width px or $small_resize_width ppt
	bindsym $mod+Up			resize shrink height $small_resize_width px or $small_resize_width ppt
	bindsym $mod+Right	resize grow width $small_resize_width px or $small_resize_width ppt
	
	bindsym $mod+Shift+$left	resize shrink width $really_small_resize_width px or $really_small_resize_width ppt
	bindsym $mod+Shift+$down	resize grow height $really_small_resize_width px or $really_small_resize_width ppt
	bindsym $mod+Shift+$up		resize shrink height $really_small_resize_width px or $really_small_resize_width ppt
	bindsym $mod+Shift+$right	resize grow width $really_small_resize_width px or $really_small_resize_width ppt

	bindsym $mod+Shift+Left		resize shrink width $really_small_resize_width px or $really_small_resize_width ppt
	bindsym $mod+Shift+Down		resize grow height $really_small_resize_width px or $really_small_resize_width ppt
	bindsym $mod+Shift+Up			resize shrink height $really_small_resize_width px or $really_small_resize_width ppt
	bindsym $mod+Shift+Right	resize grow width $really_small_resize_width px or $really_small_resize_width ppt
	
	# back to normal: Enter or Escape
	bindsym Return mode "default"
	bindsym Escape mode "default"
}

mode "gaps" {
	bindsym Up gaps inner current plus 5
	bindsym Down	gaps inner current minus 5
	bindsym Right gaps outer current plus 5
	bindsym Left gaps outer current minus 5
	bindsym 0 gaps outer current set 0, gaps inner current set 0
	bindsym space gaps outer current set 1, gaps inner current set 10

	bindsym Return mode "default"
	bindsym Escape mode "default"
}
mode "application" {
	bindsym $mod+f exec firefox;  mode "default"
	bindsym $mod+c exec code; mode "default"
	bindsym $mod+t exec $term; mode "default"
	bindsym $mod+m exec gnome-mahjongg; mode "default"
	bindsym $mod+r exec $term -e ranger; mode "default"

	bindsym Return mode "default"
	bindsym Escape mode "default"
}

bindsym $mod+r mode "resize"
bindsym $mod+a mode "application"

# i3bar config
bar {
	i3bar_command i3bar -t
	font pango: Monospace 8, FontAwesome 8

	status_command i3blocks -c ~/.i3/i3blocks.conf
	# status_command ~/builds/bumblebee-status/bumblebee-status -m disk:home battery date time -p root.path=/ -t godlike
	position top
	workspace_buttons yes
	colors {
		background	$BACKGROUND
		separator	 $BLUEGRAY
		# class			 border			backgr			text
		focused_workspace	 $BLUE	$BLUE	$BACKGROUND
		active_workspace		$BACKGROUND $BACKGROUND $BACKGROUND
		inactive_workspace	$BACKGROUND $BACKGROUND $BLUEGRAY
		urgent_workspace		$RED $RED $WHITE
	}
}

# i3 gaps setup
hide_edge_borders both
gaps inner 10
gaps outer 1
smart_gaps on

# dpi
exec_always --no-startup-id xrandr --dpi 276

# pulse audio controls
set $v_change 5
set $v_change_big 10
bindsym XF86AudioRaiseVolume exec --no-startup-id pamixer -i $v_change && pkill -RTMIN+1 i3blocks #increase sound volume
bindsym XF86AudioLowerVolume exec --no-startup-id pamixer -d $v_change && pkill -RTMIN+1 i3blocks #decrease sound volume

bindsym $mod+XF86AudioRaiseVolume exec --no-startup-id pamixer -i $v_change_big && pkill -RTMIN+1 i3blocks #increase sound volume
bindsym $mod+XF86AudioLowerVolume exec --no-startup-id pamixer -d $v_change_big && pkill -RTMIN+1 i3blocks #decrease sound volume

bindsym XF86AudioMute exec --no-startup-id pamixer -t && pkill -RTMIN+1 i3blocks # mute sound

# sreen brightness controls
set $b_change 10
set $b_change_small 5
set $b_fade 1
bindsym XF86MonBrightnessUp exec xbacklight -inc $b_change -time $b_fade #increase screen brightness
bindsym XF86MonBrightnessDown exec xbacklight -dec $b_change -time $b_fade # decrease screen brightness

bindsym $mod+XF86MonBrightnessUp exec xbacklight -inc $b_change_small -time $b_fade #increase screen brightness
bindsym $mod+XF86MonBrightnessDown exec xbacklight -dec $b_change_small -time $b_fade # decrease screen brightness

bindsym XF86AudioPlay exec playerctl play
bindsym XF86AudioPause exec playerctl pause
bindsym XF86AudioNext exec playerctl next
bindsym XF86AudioPrev exec playerctl previous

# print screen to screenshot
bindsym --release Print exec scrot $HOME/Pictures/screenshots/`date +%Y-%m-%d_%H:%M:%S`.png
bindsym --release Shift+Print exec scrot -s $HOME/Pictures/screenshots/`date +%Y-%m-%d_%H:%M:%S`.png
bindsym --release $mod+Print exec scrot -u $HOME/Pictures/screenshots/`date +%Y-%m-%d_%H:%M:%S`.png


# dropdown terminal setup
for_window [instance="dropdown"] floating enable
for_window [instance="dropdown"] move scratchpad
for_window [instance="dropdown"] resize set 1500 600
exec $term --name "dropdown"
bindsym $mod+u [instance="dropdown"]	scratchpad show, [instance="dropdown"] move position center

# dropdown calculator setup
for_window [instance="math"] floating enable
for_window [instance="math"] move scratchpad
for_window [instance="math"] resize set 1500 600
exec $term --name "math" -e "$math"
bindsym $mod+m [instance="math"]	scratchpad show, [instance="math"] move position center

for_window [instance="vimclip"] floating enable
for_window [instance="vimclip"] move position center
for_window [instance="vimclip"] resize set 1500 600
set $vimclip echo -n dog | xclip -sel clip
bindsym $mod+Shift+c exec ~/.i3/vimclip

# lock system
bindsym $mod+Shift+Delete exec i3lock

# start redshift
exec --no-startup-id redshift
